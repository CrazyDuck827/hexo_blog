---
title: 操作系统面试汇总
categories: 
    - 操作系统
tags:
    - 操作系统
    - 面试
keywords: 
    - 操作系统
    - 面试
cover: https://cdn.jsdelivr.net/gh/CrazyDuck827/CrazyDuck827.github.io/icon/RPAIEAjwLkmZR1fayU9gQD3xEJzoBhJ3.jpg
---

### 进程与线程是什么？
> - 进程：指在系统中正在运行的一个应用程序；程序一旦运行就是进程；进程——资源分配的最小单位。
> - 线程：系统分配处理器时间资源的基本单元，或者说进程之内独立执行的一个单元执行流。线程——程序执行的最小单位。
    把操作系统比作工厂，进程就是这个工厂的某个车间，线程就是这个车间的工人，一个进程可以包括多个线程。

### 进程与线程的区别是什么？
> - 资源：进程是资源分配的基本单位，但线程不拥有资源，线程能访问其所属进程的资源
> - 调度：线程是独立调度的基本单位，同一进程中线程的切换不会引起进程的切换，而不同进程间线程的切换会引起进程的切换
> - 系统开销：进程的新建和撤销时，系统需要为其分配和回收资源，如内存空间和I/O设备等，开销远大于线程的新建和撤销。进程的切换需要当前进程CPU环境的保护和新进程环境的设置，而线程的切换只需要保存和设置少量的寄存器内容，开销很小。因此，线程的系统开销远低于进程
> - 资源：进程是资源分配的基本单位，但线程不拥有资源，线程能访问其所属进程的资源
> - 通信：线程可以直接读写进程数据进行通信，但进程需要IPC（进程间通信技术）进行通信(管道、消息队列、共享内存)

### 怎么选择多进程还是多线程？
> - CPU密集型：偏重于计算，频繁使用CPU，适合多进程。如机器学习
> - I/O密集型：经常输入输出，适合多线程。如爬虫

### 协程是什么？
> - 协程是微线程，在一个线程中执行，执行过程中可以随时中断，由用户控制（进程和线程本质上是系统运行）。执行效率高，减少了线程切换和锁开销
> - 协程失去了标准线程使用多核的能力。多进程+协程，既可以利用多核，又能利用协程的高效率
> - 实现：asyncio（异步IO，即不用等待其结束就能进行其他操作），在yield处暂停等待指令

### 协程相比线程的优势是什么？
> - 协程执行效率高
> - 协程由用户控制，不需要线程切换开销。与多线程相比，线程数量越多，协程的优势越明显
> - 协程不需要锁机制。线程中需要用锁保护数据，而协程不需要写变量保护，只需要判断状态就好了

### 进程、线程、协程的堆栈区别是什么？
> - 进程：有独立的堆栈，不共享堆也不共享栈；由操作系统调度；
> - 线程：有独立的栈，共享堆而不共享栈；由操作系统调度；
> - 协程：有独立的栈，共享堆而不共享栈；由程序员自己调度。

### 参考资料

[进程与线程的一个简单解释](http://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html)
[操作系统](https://www.kancloud.cn/martist/phper-will-get-bat-tmd-offer-in-2021/2147218)


